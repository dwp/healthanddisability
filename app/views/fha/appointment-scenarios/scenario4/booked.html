{% extends path+"/_layout-caselist.html" %}


 {% block horizontal_secondary_nav %}

 <style>
hr.filter{
	clear:left;
	width:100%;
}

.badge{
	float:left;
	margin-top:2px;
}
.badge.ucb{
	background:black;
}
#facetFilterBtn{
  position:absolute;
  left:-100%;	
}

.panel.panel-error{
	background:rgba(223, 48, 52, 0.05);
	border-left:3px solid #df3034;
}

.panel{
		border-left:3px solid;
		margin-top:5px;
		font-size:16px;
		padding:8px;
}

.panel .heading-small{
		font-size:17px;
}

.claimant{
	display:inline-block;
	margin-left:10px;
}

ul.totals {
	background:#f8f8f8;
	padding:15px;
	margin-bottom:10px;
}

ul.totals li{
   display:inline-block;
   text-align:center;
   padding:0 15px 0 0;
}

ul.totals li span{
   font-weight:bold;
}

button.link{
	border:none;
	padding:0;
	font-size:19px;
	background:transparent;
}

.check-choice label span{
	font-weight:bold;
	display:block;
}

.check-group{
	margin:0;
	padding:0;
}

.filterhr{
	margin:15px 0;
}

ul.identifiers li{
width:35px;
display:block;

}

ul.identifiers li span{
display:block;
width:35px;
text-align:center;
}

.filtered td ul.list{
	font-weight:bold;
	margin-bottom:0px;
	font-size:17px;
}

.fixednav{
	position: -webkit-sticky; 
    position: sticky;
    top: 0;
}

</style>


    <form class="form" action="booked" method="post">
	<div class="fixednav">
		<div class="search-customer">
			<label class="form-label-bold visually-hidden" for="search">Customer search</label>
				<span class="form-hint">Search by NI number</span>
			<input class="form-control form-control-2-3" id="search" type="text" name="search">
			<button class="gem-c-search__submit">Search</button>
		</div>


  {% set bookedCounter = 0 %}
	{% set readyCounter = 0 %}

	{% set specialRequirements = 0 %}
	{% set specialRequirementsDay = 0 %}
	{% set taxiCounter = 0 %}
	{% set taxiCounterDay = 0 %}
	{% set ucbCounter = 0 %}
	{% set ucbCounterDay = 0 %}
	{% set interpreterCounter = 0 %}
	{% set interpreterCounterDay = 0 %}
	{% set genderCounter = 0 %}
	{% set genderCounterDay = 0 %}
	{% set accessCounter = 0 %}
	{% set accessCounterDay = 0 %}
	{% set audioCounter = 0 %}
	{% set audioCounterDay = 0 %}
	{% set newCounter = 0 %}
	{% set newCounterDay = 0 %}
	{% set reCounter = 0 %}
	{% set reCounterDay = 0 %}
	{% set edCounter = 0 %}
	{% set edCounterDay = 0 %}

	{% set todayCounter = 0 %}


  

	{% for item in customers %}

  {% if item %}
	 {% set totalCounter = totalCounter + 1 %}
	{% endif %}
	{% if item.status === "Booked"%}
	 {% set bookedCounter = bookedCounter + 1 %}
	{% endif %}
	{% if item.status === "Ready to book"%}
	 {% set readyCounter = readyCounter + 1 %}
	{% endif %}
	{% if item.status == 'Booked' and item.appointment.requirement %}
	 {% set specialRequirements = specialRequirements + 1 %}
	{% endif %}

	{% if item.appointment.date =='04/10/2019' and item.status == 'Booked' and item.appointment.requirement %}
	 {% set specialRequirementsDay = specialRequirementsDay + 1 %}
	{% endif %}

	{% if item.status === "Booked" and item.appointment.requirement == 'taxi'%}
	 {% set taxiCounter = taxiCounter + 1 %}
	{% endif %}

	{% if  item.appointment.date =='04/10/2019' and item.status === "Booked" and item.appointment.requirement == 'taxi'%}
	 {% set taxiCounterDay = taxiCounterDay + 1 %}
	{% endif %}

	{% if item.status === "Booked" and item.appointment.requirement == 'interpreter'%}
	 {% set interpreterCounter = interpreterCounter + 1 %}
	{% endif %}

	{% if item.appointment.date =='04/10/2019' and item.status === "Booked" and item.appointment.requirement == 'interpreter'%}
	 {% set interpreterCounterDay = interpreterCounterDay + 1 %}
	{% endif %}
	{% if item.status === "Booked" and item.appointment.requirement == 'gender'%}
	 {% set genderCounter = genderCounter + 1 %}
	{% endif %}

	{% if item.appointment.date =='04/10/2019' and item.status === "Booked" and item.appointment.requirement == 'gender'%}
	 {% set genderCounterDay = genderCounterDay + 1 %}
	{% endif %}
	{% if item.status === "Booked" and item.appointment.requirement == 'audio'%}
	 {% set audioCounter = audioCounter + 1 %}
	{% endif %}

	{% if item.appointment.date =='04/10/2019' and item.status === "Booked" and item.appointment.requirement == 'audio'%}
	 {% set audioCounterDay = audioCounterDay + 1 %}
	{% endif %}
	{% if item.status === "Booked" and item.appointment.requirement == 'accessible'%}
	 {% set accessCounter = accessCounter + 1 %}
	{% endif %}
    {% if item.appointment.date =='04/10/2019' and item.status === "Booked" and item.appointment.requirement == 'accessible'%}
	 {% set accessCounterDay = accessCounterDay + 1 %}
	{% endif %}


	{% if item.status === "Booked" and item.caseflags == 'ucb' %}
	 {% set ucbCounter = ucbCounter + 1 %}
	{% endif %}

	{% if item.appointment.date =='04/10/2019' and item.status == 'Booked' and item.caseflags =='ucb' %}
	 {% set ucbCounterDay = ucbCounterDay + 1 %}
	{% endif %}

	
	{% if item.status === "Booked" and item.referral.type == 'New referral' %}
	 {% set newCounter = newCounter + 1 %}
	{% endif %}

	{% if item.appointment.date =='04/10/2019' and item.status === "Booked" and item.referral.type == 'New referral' %}
	 {% set newCounterDay = newCounterDay + 1 %}
	{% endif %}

	{% if item.status === "Booked" and item.referral.type == 'Re referral' %}
	 {% set reCounter = reCounter + 1 %}
	{% endif %}

	{% if item.appointment.date =='04/10/2019' and item.status === "Booked" and item.referral.type == 'Re referral' %}
	 {% set reCounterDay = reCounterDay + 1 %}
	{% endif %}

	{% if item.status === "Booked" and item.referral.type == 'ED referral' %}
	 {% set edCounter = edCounter + 1 %}
	{% endif %}

    
	{% if item.appointment.date =='04/10/2019' and item.status === "Booked" and item.referral.type == 'ED referral' %}
	 {% set edCounterDay = edCounterDay + 1 %}
	{% endif %}

  	{% if item.appointment.date == '04/10/2019' and item.appointment.requirement == 'taxi' and item.referral.type == 'New referral' %}
     {% set todayTaxiNewCounter = todayTaxiNewCounter + 1 %}
  	{% elif item.appointment.date == '04/10/2019' and item.appointment.requirement == 'taxi' %}
     {% set todayTaxiCounter = todayTaxiCounter + 1 %}
    {% elif item.appointment.date == '04/10/2019' %}
	 {% set todayCounter = todayCounter + 1 %}
	{% endif %}
	{% endfor %}
               
<nav class="details-nav v2 mb30">
	<ul>
	    <li>
				<a href="/{{path }}/scenario/not-testing">
				Referrals (21)</a>
	    

	    </li>
	  
	    <li>
				<a href="/{{path }}/scenario/not-testing">
				Reviews (44)</a>
	    

	    </li>
	  

              <li class="active_detail">
				<a href="/{{path }}/scenario/not-testing">
				Appointments (1000)</a>
	    
	    	<ul>
	    		<li>
	    			<a href="/{{path }}/scenario/not-testing">Ready to book (244) </a>

	    		</li>
	    		<li>
	    			<a href="booked" class="active_child">Booked ({{bookedCounter}})</a>
	    		</li>

	    	
	    		<!--<li>
	    			<a href="ed-referrals" class="active_child">ED Re-referrals (2)</a>

	    		</li> -->

	    	
	    	</ul>
	    

	    </li>
	  
	    <li>
				<a href="/{{path }}/scenario/not-testing">
				Today's appointments (21)</a>
	    

	    </li>
	  
	</ul>
</nav>
</div>




  
       

{% endblock %}  
 

{% block caselist_content %}




			<div class="grid-row">
			
			<div class="column-full">
			<h2 class="heading-medium mt0">Filter by:</h2>
			</div>
           
			            <div class="column-third">
  
    <fieldset>
      <legend>
        <span class="visually-hidden">
          When
        </span>
      </legend>
      <div class="form-date">
        <div class="form-group form-group-day">
          <label class="form-label" for="capDay">Day</label>
          <input class="form-control" id="capDay" name="capDay" type="number" pattern="[0-9]*" value="{{capDay}}">
        </div>
        <div class="form-group form-group-month">
          <label class="form-label" for="capMonth">Month</label>
          <input class="form-control" id="capMonth" name="capMonth" type="number" pattern="[0-9]*" value="{{capMonth}}">
        </div>


        <button class="button button-secondary" style="margin-top:25px">Apply date</button>
		<p>
		<button id="clearFilter" class="link mt10">Clear date</button>
		</p>
      </div>
    </fieldset>
 
             
			</div>
  			            <div class="column-two-thirds">
              <h2 class="">Refiners</h2>
              <div class="pickslots">
                <div class="check-group check-top">
                
                    <h3 class="visually-hidden"><legend></legend></h3>
                     <div class="check-choice">
                      <input id="all"
                           name="filter"
                           type="radio"
                           value="all" class="facet" {{ checked('filter', 'all') }}> <label for="all">All<span>{% if data['capDay'] %}
             ({{todayCounter}}){% else %} ({{customers.length}}){% endif %}</span></label>
                    </div>

                    <div class="check-choice">
                      <input id="Special requirements"
                           name="filter"
                           type="radio"
                           value="Special requirements" class="facet" {{ checked('filter', 'Special requirements') }}> <label for="Special requirements">Requirements
						    <span>{% if data['capDay'] %}({{specialRequirementsDay}}){% else %} ({{specialRequirements}}){% endif %}</span>
						   </label>
                    </div>

                    <div class="check-choice">
                      <input id="ucb"
                           name="filter"
                           type="radio"
                           value="ucb" class="facet" {{ checked('filter', 'ucb') }}> <label for="ucb">UCB
						   <span>{% if data['capDay'] %}({{ucbCounterDay}}){% else %} ({{ucbCounter}}){% endif %}</span>
						   </label>
                    </div>
                  
                    <div class="check-choice">
                      <input id="New referrals"
                           name="filter"
                           type="radio"
                           value="New referrals" class="facet" {{ checked('filter', 'New referrals') }}> <label for="New referrals">New referrals
						   <span>{% if data['capDay'] %}({{newCounterDay}}){% else %} ({{newCounter}}){% endif %}</span>
						   </label>
                    </div>
                    <div class="check-choice">
                      <input id="Re refferals"
                           name="filter"
                           type="radio"
                           value="Re referrals" class="facet" {{ checked('filter', 'Re referrals') }}> <label for="Re refferals">Re referrals
						      <span>{% if data['capDay'] %}({{reCounterDay}}){% else %} ({{reCounter}}){% endif %}</span>
						   </label>
                    </div>

					  <div class="check-choice">
                      <input id="Ed referals"
                           name="filter"
                           type="radio"
                           value="Ed referrals"  class="facet" {{ checked('filter', 'Ed referrals') }}> <label for="Ed referals">Ed referrals
						      <span>{% if data['capDay'] %}({{edCounterDay}}){% else %} ({{edCounter}}){% endif %}</span>
						   </label>
                    </div>
			
                
                </div>
              </div>
            </div>
					
			 <p><button id="facetFilterBtn" class="">Apply filter</button></p>
		</div>
	
		<hr class="filterhr">
		
       






            <h1 class="heading-medium mt0"><span class="heading-xlarge">
			{% if  data['capDay'] and checked('filter', 'Ed referrals') %}
             {{edCounterDay}}
			 {% elif checked('filter', 'Ed referrals') %}
             {{edCounter}}
			{% elif  data['capDay'] and checked('filter', 'Re referrals') %}
             {{reCounterDay}}
			 {% elif checked('filter', 'Re referrals') %}
             {{reCounter}}
			{% elif  data['capDay'] and checked('filter', 'New referrals') %}
             {{newCounterDay}}
			 {% elif checked('filter', 'New referrals') %}
             {{newCounter}}
            {% elif  data['capDay'] and checked('filter', 'ucb') %}
			{{ucbCounterDay}} 
			{% elif checked('filter', 'ucb') %}
			{{ucbCounter}} 
            {% elif  data['capDay'] and checked('filter', 'Special requirements') %}
			{{specialRequirementsDay}} 
			{% elif checked('filter', 'Special requirements') %}
			{{specialRequirements}} 
			{% elif  data['capDay'] %} 
            {{todayCounter}} 
			{% else %} 
            {{customers.length}}
            {% endif %}</span><br/>Appointments booked
			 {% if checked('filter', 'Ed referrals') %}
             : Ed referrals
			 {% elif checked('filter', 'Re referrals') %}
             : Re referrals
			 {% elif checked('filter', 'New referrals') %}
            : New referrals
			{% elif checked('filter', 'ucb') %}
			: UCB
			{% elif checked('filter', 'Special requirements') %}
			: Requirements 
	
            {% endif %}
			
			</h1>
            {% if checked('filter', 'Special requirements') %} 
			<ul class="totals">
			<!--<li>UCB <span>{{ucbCounter}}{{todayUCB}}<span></li>-->
			<li>Interpreter: <span>{% if data['capDay'] %}{{interpreterCounterDay}}{% else %} {{interpreterCounter}}{% endif %}<span></li>
			<li>Taxi: <span>{% if data['capDay'] %}{{taxiCounterDay}}{% else %} {{taxiCounter}}{% endif %}<span></li>
			<li>Same gender: <span>{% if data['capDay'] %}{{genderCounterDay}}{% else %} {{genderCounter}}{% endif %}<span></li>
			<li>Audio: <span>{% if data['capDay'] %}{{audioCounterDay}}{% else %} {{audioCounter}}{% endif %}<span></li>
			<li>Accessible room: <span>{% if data['capDay'] %}{{accessCounterDay}}{% else %} {{accessCounter}}{% endif %}<span></li>
			<!--<li>New referrals <span>{{newCounter}}<span></li>
			<li>Re referrals <span>{{reCounter}}<span></li>
			<li>Ed referrals <span>{{edCounter}}<span></li>-->
			</ul>
            {% endif %}
    	  <table id="fileredTable"class="filtered">

                <thead>
                  <tr>
                    <th>Case details</th>
                    <th>Appointment details and requirements</th>
				    <th>Referral type</th>
                  </tr>
                </thead>


{% if  data['capDay'] and checked('filter', 'Ed referrals') %}
		{% for customer in customers %}

				{% if customer.appointment.date =='04/10/2019' and customer.status == 'Booked' and customer.referral.type =='ED referral' %}
					{% include path+"/scenario4/_table-row-caselist.html" %}
				{% endif %}
		{% endfor %}


{% elif checked('filter', 'Ed referrals') %}
		{% for customer in customers %}

				{% if customer.status == 'Booked' and customer.referral.type =='ED referral' %}
					{% include path+"/scenario4/_table-row-caselist.html" %}
				{% endif %}
		{% endfor %}


		

{% elif  data['capDay'] and checked('filter', 'Re referrals') %}
		{% for customer in customers %}
				{% if customer.appointment.date =='04/10/2019' and customer.status == 'Booked' and customer.referral.type =='Re referral' %}
					{% include path+"/scenario4/_table-row-caselist.html" %}
				{% endif %}
		{% endfor %}

{% elif checked('filter', 'Re referrals') %}
		{% for customer in customers %}
				{% if customer.status == 'Booked' and customer.referral.type =='Re referral' %}
					{% include path+"/scenario4/_table-row-caselist.html" %}
				{% endif %}
		{% endfor %}		

{% elif  data['capDay'] and checked('filter', 'New referrals') %}
		{% for customer in customers %}
				{% if customer.appointment.date =='04/10/2019' and customer.status == 'Booked' and customer.referral.type =='New referral' %}
					{% include path+"/scenario4/_table-row-caselist.html" %}
				{% endif %}
		{% endfor %}

{% elif checked('filter', 'New referrals') %}
		{% for customer in customers %}
				{% if customer.status == 'Booked' and customer.referral.type =='New referral' %}
					{% include path+"/scenario4/_table-row-caselist.html" %}
				{% endif %}
		{% endfor %}		

{% elif  data['capDay'] and checked('filter', 'ucb') %}
		{% for customer in customers %}
				{% if customer.appointment.date =='04/10/2019' and customer.status == 'Booked' and customer.caseflags =='ucb' %}
					{% include path+"/scenario4/_table-row-caselist.html" %}
				{% endif %}
		{% endfor %}

   {% elif checked('filter', 'ucb') %}
		{% for customer in customers %}
				{% if customer.status == 'Booked' and customer.caseflags =='ucb' %}
					{% include path+"/scenario4/_table-row-caselist.html" %}
				{% endif %}
		{% endfor %}		


	{% elif  data['capDay'] and checked('filter', 'Special requirements') %}

		{% for customer in customers %}
				{% if customer.appointment.date =='04/10/2019' and customer.status == 'Booked' and customer.appointment.requirement %}
					{% include path+"/scenario4/_table-row-caselist.html" %}
				{% endif %}
		{% endfor %}

		{% elif  checked('filter', 'Special requirements') %}

		{% for customer in customers %}
				{% if customer.status == 'Booked' and customer.appointment.requirement %}
					{% include path+"/scenario4/_table-row-caselist.html" %}
				{% endif %}
		{% endfor %}

	{% elif data['capDay'] %}
	
		{% for customer in customers %}
				{% if customer.appointment.date =='04/10/2019' and customer.status == 'Booked' %}
					{% include path+"/scenario4/_table-row-caselist.html" %}
				{% endif %}
		{% endfor %}

	{% else %}			
		{% for customer in customers %}    
				{% include path+"/scenario4/_table-row-caselist.html" %}
		{% endfor %}   
	{%endif%}

              </table>

<script>

</script>



</form>
{% endblock %}


	




